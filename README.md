This is my setup for my dwm status bar.

Each script writes some piece of data into a temporary file, then that data is retrieved and formatted for display on the status bar. The status bar is then updated with 'xsetroot -name'.

Temporary files are used to allow for elements of the statusbar to be updated either by means of a loop (inside of 'setStatus.sh') or by listening for some event (such as the volume display). Elements that are event driven are updated in real time with the event without interrupting (or being interrupted by) the loop.

'setStatus.sh' is executed and run in the background by my system's '.xsession' script before launching dwm. $1, or $parentPID, is the process id of the dwm login session. "Infinite" loops implemented such that they are only allowed to run if that parent process exists to prevent the script from continuing to run after logout. The 'set_display' function is simply responsible for calling all of the get functions in sourced files, which retrieve whatever data is in their corresponding temporary file and formats it if necessary. All data is then written to the status bar. The 'set_display' function can be called from either the main script or any of its children, which is what allows the status bar to be updated by both loops and events. 

'setStatus.sh' then runs the 'event_listener' function in the background. 'event_listener' waits for output from the statusBarEvents pipe (which 'setStatus.sh' creates when first executed), writes the appropriate data to its corresponding temporary file, then calls 'set_display', which ultimately retrieves that data from the temporary file. After output is read and written, it waits for output again, repeating this behavior for the duration of the login session.

After 'setStatus.shâ€™ calls for 'event_listener' to run in the background, it starts a loop which runs each second, only terminating once the login session ends. This handles non-event driven elements, such as the time display. Each of these elements has a specified delay to keep the status bar from using an unnecessary amount of system resources. For instance, a delay of 5 for the wifi display means that info about the wifi will only be retrieved every 5th time the loop runs (so every 5 seconds instead of every second).

Since the status bar constantly runs in the background of every login session, it is important for it to be lightweight, efficient, and use few system resources. The main script 'setStatus.sh' sources the required scripts and runs their functions as opposed to just calling new instances of those scripts when they are needed, as locating the script and creating a new shell process repeatedly (on every single loop at worst) would be more resource intensive.
